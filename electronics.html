<!doctype html>
<html>
	<head>
	<!--
		The layout and styling of this page, and subsiquently the redesign of this site, are heavily influenced by 
		the design of the chartjs.org site. It's beauty through simplicity was too much to resist. I have made slight
		changes so the styling of the site is more inline with the projects styling, but don't want to hide the fact 
		that the styling is taken basically directly from their css file with only minor changes. 
		
		The awesome javascript function that turns H1s and H2s into the navigation is their code as well. 

		I hope this is a compliment to the folks at chartjs.org as opposed to being "not cool"
	-->
		<title>Project Shapeoko</title>
		<link href="shapeoko.css" rel="stylesheet" />
		<link href='http://fonts.googleapis.com/css?family=Ubuntu:300,400,700' rel='stylesheet' type='text/css'>
	</head>
	<body>
	
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-11630357-11']);
		_gaq.push(['_setDomainName', 'shapeoko.com']);
		_gaq.push(['_trackPageview']);

		(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>

	<div class="header">

	    <div class="left">
	      <a href="http://docs.shapeoko.com"><span class="toplink">Shapeoko 2</span></a>

	    </div>
	    <div class="right">
	      <ul>

	      </ul>	    	
	    </div>
	</div>
	
	<div id="wrapper">
		<nav>	
			<dl>
				<dt><a href='index.html'>Welcome!</a></dt>
				<dt><a href='tips.html'>Pro Tips!</a></dt>
				<dt><a href='software.html'>Software</a></dt>
				<dt><a href='electronics.html'>Electronics</a></dt>
				<dt><a href='wheels.html'>Wheels + Idlers</a></dt>
				<dt><a href='carriages.html'>Carriages</a></dt>
				<dt><a href='zaxis.html'>Z-Axis</a></dt>
				<dt><a href='gantry.html'>Gantry</a></dt>
				<dt><a href='yaxis.html'>Y-Axis</a></dt>
				<dt><a href='workarea.html'>Work Area</a></dt>
				<dt><a href='wiring.html'>Electrical Wiring</a></dt>
				<dt><a href='helloworld.html'>Hello, World</a></dt>
				<dt><a href='firstjob.html'>First Job</a></dt>
			</dl>
		</nav>
		
		<div id="contentWrapper">
<article id="electronics"><h1>Testing Electronics</h1>
<h2>Overview</h2>
<p><img alt="Arduino, gShield, wiring, stepper motors, lit" src="content/tPictures/so_e_arduino_wired_li_2.jpg"> <img alt="image of required components" src="content/tPictures/so_electronics_parts_2.jpg"></p>
<p>Before we get all crazy bolting our new machine together, let's give our electronics a test run. It's frustrating to have the machine fully assembled, only to find there is a problem with your electronics that may require disassembly! Let's cut that off at the pass and give everything a thorough checking first.</p>
<p>For reference, the image below shows the concept of wiring Shapeoko 2.</p>
<p><a href="sketches/electronics_layout.svg"><img alt="Generic electronics layout" src="content/sketches/electronics_layout.svg"></a></p>
<h2>Requirements</h2>
<p><img alt="image of required components" src="content/tPictures/so_electronics_parts_4.jpg"> </p>
<ul>
<li><strong>Arduino with Grbl firmware</strong> (contains an AVR processor, USB connector and I/O pins)</li>
<li>(Arduino) <strong>gShield</strong> (formerly GrblShield, takes the signals Grbl generates and drives the steppers. Small pots are used to adjust)</li>
<li><strong>Stepper motors</strong> x 4pcs</li>
<li><strong>Power Supply</strong> with wall plug</li>
<li><strong>Barrel Connector</strong> (for connecting the power supply to the gShield)</li>
<li>Computer with a <strong>Grbl Communication/Control program</strong> installed</li>
<li><strong>USB Cable</strong> (A to B)</li>
<li>Patience (just a little bit)</li>
</ul>
<h2>Tools</h2>
<p><img alt="Tools" src="content/tPictures/e_test_tools_1.jpg"><img alt="Tools" src="content/tPictures/e_test_tools_2.jpg"></p>
<ul>
<li>Screw Driver 2.0mm blade</li>
<li>razor blade</li>
<li>(optional shown) Wire strippers</li>
<li>(optional and not shown) Multimeter for testing continuity</li>
</ul>
<p>The terminal blocks use a combination screw which will accept either a Phillips or flat blade screwdriver.</p>
<h2>Connect Arduino</h2>
<p>Now that we have everything gathered up, you should find yourself with a setup similar to this:</p>
<p><img alt="image of required components" src="content/tPictures/so_electronics_parts_4.jpg">  </p>
<p>First thing that we do is plug our Arduino into the computer.</p>
<p><img alt="Arduino plugged into USB cable" src="content/tPictures/so_e_arduino_lit_4.jpg"></p>
<p>Remember, the big end of the cable goes into the Arduino. </p>
<p>Chances are, the Arduino will be recognized by your computer. 
If not, download the appropriate drivers/software for your platform (do not proceed beyond Step #4 or you will erase Grbl):</p>
<ul>
<li><a href="http://arduino.cc/en/Guide/MacOSX#toc2">Mac OS X</a></li>
<li><a href="http://arduino.cc/en/Guide/Windows#toc2">Windows</a></li>
<li><a href="[http://playground.arduino.cc/Learning/Linux">Linux</a></li>
</ul>
<h2>Communication / Control Program</h2>
<p>Once the Arduino is recognized by your computer system, install a Communication / Control Program.</p>
<h3>UGS</h3>
<p><img alt="UGS" src="content/helloworld/ugs1.png"><br />
<em>(universal gcode sender by will winder)</em></p>
<p>If Java isn't an option for your machine there are other <a href="http://www.shapeoko.com/wiki/index.php/Communication_/_Control">Communication/Control programs</a>.</p>
<h2>Hook Stuff Up</h2>
<p><img alt="Arduino and gShield" src="content/tPictures/so_e_arduino_gshield_2.jpg"> <img alt="Arduino and gShield on edge" src="content/tPictures/so_e_arduino_gshield_oe_2.jpg"> <img alt="Arduino and gShield assembled" src="content/tPictures/so_e_arduino_gshield_aa_2.jpg"></p>
<p>The first step is to plug the Arduino into the gShield. The Arduino will run Grbl, while the gShield will be connected to the stepper motors and will control them. Be careful of the electronics, not to bend any pins, or to allow static electricity to damage them.</p>
<p>You will need to connect the gShield to the terminal blocks (using the 4 conductor grey wire) and the terminal blocks to the motors. If you have very long wires coming off of the stepper motors you will have the option of choosing where the terminal blocks are placed, either on the gantry, or connected to the electronics. If the wires are short, then the terminal blocks will need to be attached to the gantry. On the gantry minimizes the wear and tear on the motor leads, limiting it to the 4 conductor grey wire (this is easily sourced at any home improvement store), while hiding the terminal blocks away provides for a neater appearance.</p>
<p><img alt="Stepper motor, terminal block, screwdriver" src="content/tPictures/so_e_stepper_motor_tb_2.jpg"> <img alt="Stripped wires" src="content/tPictures/so_e_wire_stripped_2.jpg">
<img alt="Stepper motor connected to terminal block, connected to grey wire" src="content/tPictures/so_e_steppermotor_tb_wir_2.jpg"> <img alt="Wiring Y-Axis motors to terminal block" src="content/tPictures/so_e_steppermotor_tb_y_2.jpg"> <img alt="Stepper motors and terminal blocks wired up" src="content/tPictures/so_e_steppermotors_wi_a_2.jpg"> <img alt="Open connector on gShield" src="content/tPictures/so_e_arduino_open_2.jpg"> <img alt="Arduino, gShield, terminal blocks, wiring, stepper motors" src="content/tPictures/so_e_arduino_usb_2.jpg"> <img alt="image of required components" src="content/tPictures/so_e_arduino_wired_lit_2.jpg"></p>
<p>Start by cutting the grey wire to length (either equal thirds, or some proportion which takes into account the wire for the Y-axis having a slightly shorter run than the X- and Z-axes.</p>
<p>Next, strip all of the wire ends. The ends which will attach to the terminal block should be approximately 3/8" so as to be twisted into a hook so as to wrap around the terminal block screws. The other end of the grey wire should be stripped approximately 1/4" of an inch so as to fit into the gShield. Be careful of stripping too much and leaving wire unnecessarily exposed which could create the possibility of a short.</p>
<p><img alt="Stripped wire" src="content/tPictures/so_e_wire_stripped_2.jpg"></p>
<p>Next, loosen up all the screws on one terminal block, then begin making connections by twisting the wire ends into hooks, hooking them onto the screws oriented so that the turning of the screw will tighten them and tighten the wire.</p>
<p>Make all connections in the same colour order. Shown is:</p>
<ul>
<li>Red</li>
<li>Blue/White (Please match the other 3 colours and pair this odd twain)</li>
<li>Green</li>
<li>Black</li>
</ul>
<p><img alt="Stepper motor connected to terminal block, connected to grey wire" src="content/tPictures/so_e_steppermotor_tb_wired_.jpg"></p>
<p>Since the ShapeOko 2 uses two motors on the Y-Axis and the gShield only has 3 stepper drivers, it is necessary to wire the two motors to one terminal block as shown below. Note that it is necessary to reverse one pair of wires so that the motors will run in opposite directions when placed on the gantry in opposite orientations.</p>
<p><img alt="Wiring Y-Axis motors to terminal block" src="content/tPictures/so_e_steppermotor_tb_y_4.jpg"></p>
<p>(red and blue to make purple was selected)</p>
<p>Carefully make each connection. Be careful not to lose any screws. If necessary, trim wires and re-strip so as to achieve a good connection.</p>
<p><img alt="image of required components" src="content/tPictures/so_e_steppermotors_wired_4.jpg"></p>
<p>Next, connect the grey wires from the terminal blocks to the stepper motors. Make all of the connection initially in the same order. Later, when configuring the machine, it may be necessary to swap wires around so as to achieve the desired rotational direction.</p>
<p><img alt="image of required components" src="content/tPictures/so_e_steppermotors_ar_4.jpg"></p>
<p>Please note the gShield takes two different sizes of screwdriver. 1/8" for the screws in the blue power connector, 3/32" for the screws in the green stepper motor connectors.</p>
<p>The green stepper motor connectors should be unscrewed so as to open them up as the right-most connector is below.</p>
<p><img alt="Open connector on gShield" src="content/tPictures/so_e_arduino_open_4.jpg"></p>
<p>Connect the grey wires from the stepper motors. Lastly one must connect the power. Note that each green block represents one axis. Be certain to connect the dual-motor Y-Axis to the correct block.</p>
<p>Once completed, all wires will be connected and none will be loose. It is important that the wires be connected securely since the various parts will be in motion, and applying power to a stepper driver which is not connected to a motor may damage the driver.</p>
<p>If you have a multimeter you may wish to test the connections for continuity.</p>
<h3>Power</h3>
<p><em>Be careful with the power supply, and don't work on power wires when the power supply is plugged in.</em></p>
<p><strong>Caution:</strong> Please note that the 12V power supply has a connector which matches the Arduino's 5V power supply connection --- it must not be plugged into said connector. The Arduino is able to draw its power over the USB connection, so the power connector on the Arduino is not used.</p>
<p>First, strip the power lead, it may also be necessary to split the lead at the end so as to allow it to neatly connect to the power connector on the gShield.</p>
<p><img alt="Stripped lead for barrel connector" src="content/tPictures/power_connection.jpg"></p>
<p>Connect it to the Arduino. There are two leads, one a solid black wire, the other black w/ a white stripe. </p>
<ul>
<li>black == (-)</li>
<li>black/white == (+) (or red)</li>
</ul>
<p>Please connect each lead to the appropriate side of the gShield's blue power connector.</p>
<p><img alt="Power connections" src="content/tPictures/so_e_arduino_usb_4.jpg"></p>
<p>Plug the barrel connector into the matching connector from the power supply, plug it into a grounded outlet. Your gShield should light up blue and be ready for operation.</p>
<p><img alt="image of required components" src="content/tPictures/so_e_arduino_usb_lit_4.jpg"></p>
<h2>Testing</h2>
<p>Attaching tape to the motor shafts makes it easier to see the rotation.</p>
<p>Load up a Communication / Control program and use its jog functionality to test each Axis.</p>
<h3>Go For a Spin</h3>
<p>Z-Axis</p>
<h3>Another Spin</h3>
<p>X-Axis</p>
<h3>And a Final Spin</h3>
<p>Y-Axis --- make certain that the two motors for the Y-axis are rotating in opposite directions.</p></article><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="jquery.simplemodal.1.4.4.min.js"></script>
<script src="prettify.js"></script>
<script>
/*
	$(document).ready(function(){
	
		var $nav = $("nav dl");
		
		$("article").each(function(){
			var $el = $(this);
			var $h1 = $el.find("h1");
			var sectionTitle = $h1.html();
			var articleId = $el.attr("id");
			var $dt = $("<dt><a href=\"#"+articleId +"\">"+sectionTitle+"</a></dt>");
			
			$dt.find("a").on("click",function(e){
				e.preventDefault();
				$('html,body').animate({scrollTop: $h1.offset().top},400);
			});
			
			$nav.append($dt);
			
			var $subtitles = $el.find("h2");
			
			$subtitles.each(function(){
				var $h2 = $(this);
				var title = $h2.text();
				var newID = articleId + "-" +camelCase(title);
				$h2.attr("id",newID);
				var $dd = $("<dd><a href=\"#" +newID + "\">" + title + "</a></dd>");
				
				$dd.find("a").on("click",function(e){
					e.preventDefault();
					$('html,body').animate({scrollTop: $h2.offset().top},200);
				})
				$nav.append($dd);
				
			});
			
			var $articles = $el.find("article");
			
		});	
		
		$("canvas").each(function(){
			var $canvas = $(this);
			var ctx = this.getContext("2d");
			
			
			
			eval($("code[data-for='" + $canvas.attr("id") + "']").text());
			
			
			var evalString = "new Chart(ctx)." + $canvas.data("type") + "(data);";
			
			eval(evalString);
						
		});
		prettyPrint();			
		
		function camelCase(str){			
			var splitString = str.split(" ");
			
			var returnedCamel = splitString[0].toLowerCase();
			
			for (var i=1; i<splitString.length; i++){
				returnedCamel += splitString[i].charAt(0).toUpperCase() + splitString[i].substring(1).toLowerCase();
			}
			
			return returnedCamel;
			
		} 
	});
*/
	</script>
<script>
/*
  $(document).ready(function(){
    $(".photo").click(function(e) {
      var hrefval= $(this).attr("src"); 
      $.modal('<img src=" ' + hrefval + '">', { 
        containerCss: { height:'auto',width:'auto'}, 
        overlayClose: true 
      });
      e.preventDefault();
    });
  });
/*
</script>

</body>
</html>